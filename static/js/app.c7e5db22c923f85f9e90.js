webpackJsonp([1],{16:function(e,t){e.exports={board:"Mv6GMBj1v2JyVWEppXakA",row:"_2DMjD28BXR5Eqpt9Bks9y6",cell:"_3VNLvlALC4K1loEPSiSiPU",chessman:"_3d8i8FXIGE7ixFYU7YBfwg",black:"iZkz73gyOMuI8m3NfZgMR",white:"_2_dJhzxa849k2Ccu8Wyq-L"}},4:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),f=n.n(s),y=n(6),d=n.n(y),h=n(16),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(e){var t=e.chessman,n=e.isLast,r=0===t?"black":"white";return f.a.createElement("div",{className:h[r]+" "+h.chessman},n&&"+")},m=function(e){var t=e.cell,n=e.pos,r=e.play,a=e.lastPos,o=e.currentRound,i=function(){null===t&&r(n)},l=null,u=!1;return a.forEach(function(e,t){null===e||t>o||e[0]===n[0]&&e[1]===n[1]&&(l=t%2?0:1,u=t===o)}),f.a.createElement("div",{className:h.cell,onClick:i},null!==l&&f.a.createElement(v,{chessman:l,isLast:u}))},b=function(e){var t=e.rowIndex;return f.a.createElement("div",{className:h.row},Array(10).fill(null).map(function(n,r){return f.a.createElement(m,p({key:r,cell:n},e,{pos:[t,r]}))}))},w=function(e){return f.a.createElement("div",{className:h.board},Array(10).fill(null).map(function(t,n){return f.a.createElement(b,p({key:n,row:t,rowIndex:n},e))}))},g=w,E=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function(e){function t(){var e,n,o,i;r(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.state={cvs:null,ctx:null},o.drawBoard=function(){var e=document.querySelector("#board"),t=e.getContext("2d");t.beginPath();for(var n=1;n<=10;n++)t.moveTo(0,32*n+30*(n-1)),t.lineTo(620,32*n+30*(n-1)),t.moveTo(32*n+30*(n-1),0),t.lineTo(32*n+30*(n-1),620);t.stroke()},o.drawChessman=function(){var e=o.props,t=e.lastPos,n=e.currentRound,r=o.state.ctx;if(null!==r){r.clearRect(0,0,620,620);var a=!0,i=!1,l=void 0;try{for(var u,c=t.entries()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var s=u.value,f=E(s,2),y=f[0],d=f[1];if(y>n)break;if(Array.isArray(d)){var h=[62*d[1]+32,62*d[0]+32];r.moveTo.apply(r,h),r.beginPath(),r.arc.apply(r,h.concat([20,0,2*Math.PI])),r.fillStyle=y%2?"#000":"#fff",r.fill(),r.stroke(),y===n&&(r.font="40px Georgia",r.fillStyle="#f00",r.fillText("+",h[0]-12,h[1]+10))}}}catch(e){i=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw l}}}},o.handleClick=function(e){var t=o.state.cvs;if(e.target===t){var n=[~~(e.layerY/31),~~(e.layerX/31)];o.props.play(n)}},i=n,a(o,i)}return o(t,e),P(t,[{key:"componentDidMount",value:function(){this.drawBoard();var e=document.querySelector("#chessman"),t=e.getContext("2d");this.setState({cvs:e,ctx:t}),document.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){return this.drawChessman(),f.a.createElement("div",{style:{position:"relative"}},f.a.createElement("canvas",{id:"board",width:"620",height:"620",style:{width:310,height:310}}),f.a.createElement("canvas",{id:"chessman",style:{position:"absolute",top:0,left:0,width:310,height:310},width:"620",height:"620"}))}}]),t}(s.Component),O=k,R=n(17),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),j=function(e){function t(){l(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));C.call(e);var n=Object(R.List)(Array(10).fill(null)),r=Object(R.List)(Array(10).fill(n));return e.state={initData:R.List.of(r),data:R.List.of(r),currentPlayer:0,currentRound:0,maxRound:0,lastPos:R.List.of(null),hasWinner:!1,version:0},e}return c(t,e),_(t,[{key:"componentWillUpdate",value:function(e,t){var n=t.lastPos,r=t.data,a=t.currentRound,o=this.state.currentPlayer;if(!(n.size<=1)&&!0===this.isWin(n.get(a),r.get(a),o)){var i=0===o?"黑方":"白方";this.setState({hasWinner:!0}),alert(i+"胜利！")}}},{key:"render",value:function(){var e=this.state,t=e.currentRound,n=e.lastPos,r=e.currentPlayer,a=e.maxRound,o=e.version;return f.a.createElement("div",null,f.a.createElement("button",{onClick:this.changeVersion},"Switch to ",0===o?"canvas":"DOM"," version"),0===o?f.a.createElement(g,{lastPos:n,currentRound:t,play:this.play}):f.a.createElement(O,{lastPos:n,currentRound:t,play:this.play}),f.a.createElement("p",null,"Current player: ",r?"White":"Black"),f.a.createElement("p",null,"Current round: ",t),f.a.createElement("p",null,f.a.createElement("button",{onClick:this.undo,disabled:0===t},"undo"),f.a.createElement("button",{onClick:this.redo,disabled:a<=t},"redo"),f.a.createElement("button",{onClick:this.restart},"restart")))}}]),t}(s.Component),C=function(){var e=this;this.play=function(t){var n=e.state,r=n.data,a=n.currentRound,o=n.currentPlayer,i=n.hasWinner,l=Object(R.List)(r.get(a));if(null===l.get(t[0]).get(t[1])&&!i){var u=l.updateIn([t[0],t[1]],function(){return o});e.setState(function(e){var n=e.currentRound,r=e.data,a=e.lastPos;return{data:r.slice(0,n+1).push(u),currentPlayer:+!e.currentPlayer,currentRound:e.currentRound+1,maxRound:e.currentRound+1,lastPos:a.slice(0,n+1).push(t)}})}},this.undo=function(){e.setState(function(e){return{currentRound:e.currentRound-1,currentPlayer:+!e.currentPlayer,hasWinner:!1}})},this.redo=function(){e.setState(function(e){return{currentRound:e.currentRound+1,currentPlayer:+!e.currentPlayer}})},this.restart=function(){e.setState(function(e){return{currentRound:0,maxRound:0,currentPlayer:0,hasWinner:!1,lastPos:R.List.of(null),data:e.initData}})},this.isWin=function(e,t,n){if(null!==e){return[[[0,1],[0,-1]],[[1,0],[-1,0]],[[1,1],[-1,-1]],[[1,-1],[-1,1]]].some(function(r){return r.reduce(function(r,a){for(var o=0,l=[].concat(i(e));;){if(l=[l[0]+a[0],l[1]+a[1]],l[0]<0||l[0]>9||l[1]<0||l[1]>9)break;if(t.get(l[0]).get(l[1])!==n)break;o++}return r+o},0)>=4})}},this.changeVersion=function(){e.setState(function(e){return{version:+!e.version}})}},x=j,S=n(18),A=function(e){d.a.render(f.a.createElement(S.AppContainer,null,f.a.createElement(e,null)),document.getElementById("root"))};A(x)}},[4]);